<!-- sakai_filepicker_select.vm, version: Id:  $, use with org.sakaiproject.content.tool.FilePickerAction.java -->
<style type="text/css">
ul.makeMenu, ul.makeMenu ul {
  width: 70px;                 /* ^^^ sets the size of the 'button' */
  border: 2px solid #D6DCE9;      /* puts a  border around the menu blocks */
  background-color: #ccc;      /* makes the menu blocks white - a bg-color MUST be included for IE to work properly! */
  background-image:url(images/gloss.gif);      /* puts in a background image! */
  padding: 2px;           /* stops the usual indent from ul */
  padding-left: 6px;           /* stops the usual indent from ul */
  cursor: default;             /* gives an arrow cursor */
  margin-left: 0px;            /* Opera 7 final's margin and margin-box model cause problems */
}
ul.makeMenu li {
  list-style-type: none;       /* removes the bullet points */
  margin: 0px;                 /* Opera 7 puts large spacings between li elements */
  position: relative;          /* makes the menu blocks be positioned relative to their parent menu item
                                  the lack of offset makes these appear normal, but it will make a difference
                                  to the absolutely positioned child blocks */
  color: #000000;                 /* sets the default font colour to white */
}
ul.makeMenu li > ul {          /* using the > selector prevents many lesser browsers (and IE - see below) hiding child ULs */
  display: none;               /* hides child menu blocks - one of the most important declarations */
  position: absolute;          /* make child blocks hover without leaving space for them */
  top: 2px;                    /* position slightly lower than the parent menu item */
  left: 50px;                  /* this must not be more than the width of the parent block, or the mouse will
                                  have to move off the element to move between blocks, and the menu will close */

}
ul.makeMenu li:hover, ul.makeMenu li.CSStoHighlight {
 /* background-color: #ffa;      /* gives the active menu items a yellow background */
  color: #000;                 /* makes the active menu item text black */ 
}
ul.makeMenu ul.CSStoShow {     /* must not be combined with the next rule or IE gets confused */
  display: block;              /* specially to go with the className changes in the behaviour file */
}
ul.makeMenu li:hover > ul {    /* one of the most important declarations - the browser must detect hovering over arbitrary elements
                                  the > targets only the child ul, not any child uls of that child ul */
  display: block;              /* makes the child block visible - one of the most important declarations */
  width: 170px;    				/* HT: make the pop up larger */
	background-color:#ffffff;		/* HT: white background */  
	background-image:none;		/* HT: white background */
	position:absolute;
 	z-index:3
}

/* and some link styles */
ul.makeMenu li a { display: block; width: 100%; text-decoration: underline;   padding:6px; }
ul.makeMenu li a:hover, ul.makeMenu li a.CSStoHighLink { color: #000; }
ul.makeMenu li:hover > a { color: #000; } /* supports links in branch headings - should not be display: block; */
</style>
<script type="text/javascript"><!--//--><![CDATA[//><!--

sfHover = function() {
	var sfEls = document.getElementById("nav").getElementsByTagName("LI");
	for (var i=0; i<sfEls.length; i++) {
		sfEls[i].onmouseover=function() {
			this.className+=" sfhover";
		}
		sfEls[i].onmouseout=function() {
			this.className=this.className.replace(new RegExp(" sfhover\\b"), "");
		}
	}
}
if (window.attachEvent) window.attachEvent("onload", sfHover);
//--><!]]></script>

<script language="JavaScript" type="text/JavaScript">
	<!--
		function openCopyrightWindow(theURL,winName,winSettings) 
		{ 
		  window.open(theURL,winName,winSettings);
		  return false;
		}
		function submitform(id)
		{
			var theForm = document.getElementById(id);
			if(theForm && theForm.onsubmit)
			{
				theForm.onsubmit();
			}
			if(theForm && theForm.submit)
			{
				theForm.submit();
			}
		}
	//-->
</script>
<div class="portletBody">
	#if ($alertMessage)
		<div class="alertMessage">$tlang.getString("gen.alert") $validator.escapeHtml($alertMessage)</div><div style="display:block;clear:both" ></div>
	#end
	<h3>
		#if($helper_title)
			$helper_title
		#else
			$tlang.getString("att.add")
		#end
	</h3>
	<div class="instruction">
		#if($helper_instruction)
			$helper_instruction
		#else
			$tlang.getString("att.instr")
		#end
		#if($attached.isEmpty())
		#else
			$tlang.getString("att.fin")
		#end	
	</div>

	<form name="attachForm" id="attachForm" action="#toolForm("FilePickerAction" "Main")" method="post">
		<input type="hidden" name="source" value="0" />
		<input type="hidden" name="collectionId" value="$validator.escapeHtml($collectionId)" />
		<input type="hidden" name="from" value="list" />
		<input type="hidden" name="sakai_action" id="sakai_action" value="" />
		<input type="hidden" name="selectedItemId" id="selectedItemId" value="" />
		<input type="hidden" name="rt_action" id="rt_action" value="" />
		#if($attached.isEmpty())
		#else
			<table class="listHier lines" cellspacing="0" cellpadding="0" summary="$tlang.getString("att.sellistsum")">
				<caption class="skip" style="display:none">$tlang.getString("att.sellistcap")</caption>
				<tr>
					<th id="item">
						$tlang.getString("att.items")
					</th>
					<th  id="action">
						$tlang.getString("att.rmv")
					</th>
				</tr>	
					#foreach($att_item in $attached)
						<tr>
							<td headers="item">
								<h4>
									<img src="#imageLink($contentTypeImageService.getContentTypeImage($att_item.contentType))" border= "0" alt ="$contentTypeImageService.getContentTypeDisplayName($att_item.contentType) icon" hspace="0" />
									<a href="$att_item.accessUrl" target="_blank" title="$tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($att_item.contentType)  [$tlang.getString('gen.newwin')]">$att_item.displayName</a>
								</h4>	
							</td>
							<td  headers="action">
								<div class="itemAction">
									<a href="#toolLinkParam("ResourcesAction" "doRemoveitem" "itemId=$validator.escapeUrl($att_item.id)")" title="$tlang.getString('att.remove')">$tlang.getString("att.remove")</a>
								</div>	
							</td>
						</tr>
					#end
			</table>
		#end	
		######################  Page Title / Breadcrumbs  ##############
		<h3>
			<span class ="chefBreadCrumb">
				$tlang.getString("gen.location")
				<img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="$tlang.getString('gen.folder1')" />
				#foreach ($item in $collectionPath)
					#if($item.isLast())
						$validator.escapeHtml("$item.name")
						#if($upOneLevel)
							<a href="#toolLinkParam("ResourcesAction" "doNavigate" "collectionId=$validator.escapeUrl($upOneLevel.id)&navRoot=$validator.escapeUrl($upOneLevel.root)&navRoot=$validator.escapeUrl($upOneLevel.root)")" title= "$tlang.getString('sh.one')">
								<img src="/library/image/sakai/onelevelup.gif" border="0" alt ="$tlang.getString('sh.one')"/>
							</a>
						#end
					#else
						<a href="#toolLinkParam("ResourcesAction" "doNavigate" "collectionId=$validator.escapeUrl($item.id)&navRoot=$validator.escapeUrl($item.root)&navRoot=$validator.escapeUrl($item.root)")" title ="$tlang.getString('sh.go')">
							$validator.escapeHtml("$item.name")
						</a> /
						#set($upOneLevel = $item)
					#end
				#end
			</span>		
		</h3>
		######################  Heirarchical list of resource folders/items  ##############
		<table class="listHier lines" cellspacing="0" border="0" summary="$tlang.getString("att.listsum")">
			######################  Column labels, sort controls, expand/collapse all  ##############
			<caption class="skip" " style="display:none">$tlang.getString("att.listcap")</caption>
			<tr>
				<th id="title">
					#if ($expandallflag && "$expandallflag" == "$TRUE")
						<a href="#toolLinkParam("ResourcesAction" "doUnexpandall" "collectionId=$validator.escapeUrl($collectionId)")" title ="$tlang.getString('collapseall')">
							<img src = "#imageLink("sakai/collapse-expand.gif")" border="0" title="$tlang.getString('collapseall')" alt="$tlang.getString('collapseall')" hspace="0" />
						</a>								 
					#else
						<a href="#toolLinkParam("ResourcesAction" "doExpandall" "collectionId=$validator.escapeUrl($collectionId)")" title ="$tlang.getString('expandall')">
							<img src = "#imageLink("sakai/expand-collapse.gif")" border="0" title="$tlang.getString('expandall')" alt="$tlang.getString('expandall')" hspace="0" />
						</a>								 
					#end
					## <img src = "#imageLink($contentTypeImageService.getContentTypeImage("folder"))" border="0" alt="%%%" />
					<a href="#toolLinkParam("ResourcesAction" "doSort" "criteria=title&collectionId=$validator.escapeUrl($collectionId)")" title ="$tlang.getString('sh.sorttit')"> 
						$tlang.getString("gen.title1")
						#if ($currentSortAsc.equals("true")) 
							<img src = "#imageLink("sakai/sortascending.gif")" border="0" title ="$tlang.getString('sh.sorttitas')" alt ="$tlang.getString('sh.sorttitas')" /> 
						#else 
							<img src = "#imageLink("sakai/sortdescending.gif")" border="0" title ="$tlang.getString('sh.sorttitdesc')" alt ="$tlang.getString('sh.sorttitdesc')" /> 
						#end 
					</a>
				</th>
				<th id="actions">
					$tlang.getString("gen.actions")
				</th>
			</tr>
			#set($itemcount = 0)
			#set ($unit = "em")
			#foreach($item in $this_site)
				#set($itemcount = $itemcount + 1)
				#set ($width = "$!{item.depth}$unit")
				#if ($item.depth==0)	
					#set ($margin="margin-left:0")
				#else
					#set ($margin="margin-left:2em")
					#set ($marginAction="margin-left:4.7em")
				#end
				#if ($item.depth > 3)
					#set($headerDepth = 6)
				#else
					#set($headerDepth = $item.depth + 3)
				#end
				############################### Show top level folder #################
				<tr>
					######################  Item title and action links  ##############
					<td headers="title" style="text-indent:$width">
						<h$headerDepth title="$validator.escapeHtml(${item.name})">
						#if ($item.isCollection())
							#if ($item.isEmpty())
								<img src = "#imageLink("sakai/dir_closed.gif")" border="0" alt="$tlang.getString('gen.folder1')" />
								$validator.escapeHtml(${item.name})
							#elseif ($item.canRead())
								#if (!$expandedCollections.containsKey($item.Id))
									<a href="#toolLinkParam("ResourcesAction" "doExpand_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.open')">
										<img src = "#imageLink("sakai/dir_closedplus.gif")" border="0" title="$tlang.getString('sh.open')" alt="$tlang.getString('sh.open')" />
									</a>
								#else
									<a href="#toolLinkParam("ResourcesAction" "doCollapse_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.close')">
										<img src = "#imageLink("sakai/dir_openminus.gif")" border="0" title="$tlang.getString('sh.close')" alt="$tlang.getString('sh.close')" />
									</a>
								#end
								<a href="#toolLinkParam("ResourcesAction" "doNavigate" "collectionId=${validator.escapeUrl(${item.id})}&navRoot=$validator.escapeUrl($item.root)")" title="$tlang.getString('sh.go')">
									$validator.escapeHtml(${item.name})
								</a>
							#else
								<img src = "#imageLink("sakai/dir_closed.gif")" border="0" alt="$tlang.getString('gen.folder1')" />
								$validator.escapeHtml(${item.name})
							#end
						#else
							#if ($item.canRead())
								#if ($item.hasCopyrightAlert())
									## if there is a copyright alert, show the alert page first
									<a href="" 
									title="$tlang.getString('gen.copycomf') $tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
									onclick="openCopyrightWindow('${item.url}','copyrightAlertWindow','scrollbars=yes,menubar=yes,height=600,width=800,resizable=yes,toolbar=yes,location=yes,status=yes');return false">
									#else
									<a href="${item.url}" target="${item.target}"
										title="$tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
									>
								#end
								<img src = "#imageLink($contentTypeImageService.getContentTypeImage($item.type))" border= "0" alt ="" hspace="0" />
								</a>
								#if ($item.hasCopyrightAlert())
									## if there is a copyright alert, show the alert page first
									<a href=""
									title="$tlang.getString('gen.copycomf') $tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
									onclick="openCopyrightWindow('${item.url}','copyrightAlertWindow','scrollbars=yes,menubar=yes,height=600,width=800,resizable=yes,toolbar=yes,location=yes,status=yes');return false;">
										$validator.escapeHtml($item.name)
									</a>
									&#169;
								#else
									<a href="$item.url" target="$item.target"
									title="$tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
									>
										$validator.escapeHtml($item.name)
									</a>
								#end
							#else
								 <img src = "#imageLink($contentTypeImageService.getContentTypeImage($item.type))" border="0" alt ="" hspace="0" />
								$validator.escapeHtml($item.name)
								#if ($item.hasCopyrightAlert())
									&#169;
								#end
							#end
						#end
						</h$headerDepth>
					</td>
					<td headers="actions">
						#if($item.isCollection())
							#if($item.addActions && !$item.addActions.isEmpty())
								<span id="button-$itemcount">
									<ul class="makeMenu">
										<li style="position:relative; z-index:4">Add <img src="images/sort_down.gif">
											<ul style="">
												#foreach($action in $item.addActions)
													<li><a href="#" onclick="document.getElementById('selectedItemId').value='$item.id';document.getElementById('rt_action').value='${action.typeId}${ACTION_DELIMITER}$action.id';document.getElementById('sakai_action').value='doDispatchAction';submitform('attachForm');">$labeler.getLabel($action)</a></li>
												#end
											</ul>
									  	</li>
									</ul>
								</span>
							#end
						#else
							<div class="itemAction">
								<a href="#toolLinkParam("ResourcesAction" "doAttachitem" "itemId=$validator.escapeUrl(${item.id})")" title ="$tlang.getString('att.select')">$tlang.getString("att.select").trim()</a>
							</div>
						#end
					</td>
				</tr>
			#end ## foreach $item in $this_site
			
			############################################# Begin "Other sites" section
			#if($allowed_to_see_other_sites)
				#if("$!show_other_sites" == "true")
					<tr>
						<th colspan="3">
						<h4>
							<a href="#"
								onclick="javascript:document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doHideOtherSites")';submitform('attachForm');" title= "$tlang.getString('list.hide')">
								<img src="#imageLink("sakai/collapse.gif")" alt="$tlang.getString('list.hide')" border="0" align="top" /> $validator.escapeHtml("$tlang.getString('list.hide')")
							</a>
						</h4>
						</th>
					</tr>
					################################################################ Begin Paging widgets
					#if($!allMsgNumber && $allMsgNumberInt && $allMsgNumberInt > 5)
						<tr class="exclude">
							<td colspan="7">
								<div class="rightNav">
									<span class="instruction" style="margin-bottom:.3em;">Viewing $topMsgPos - $btmMsgPos of $allMsgNumber items</span>
									#if ("$pagesize" != "0")
										#if ($goPPButton == "true")
											<input type="button" name="List_first" value="|&lt;" title="First" onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doList_first")'; submitform('attachForm');" />
										#else
											<input type="button" name="List_first" value="|&lt;" disabled="disabled" />
										#end
										#if ($goPPButton == "true")
											<input type="button" name="List_prev" value="&lt;" title="Previous $pagesize" onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doList_prev")'; submitform('attachForm');" />
										#else
											<input type="button" name="List_prev" value="&lt;" disabled="disabled" />
										#end
									#end
									<!-- $pagesize  "$pagesize" -->
									<select name="selectPageSize" onchange="javascript:blur(); document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doChange_pagesize")';submitform('attachForm');">
										<option value="5"#if("$pagesize" == "5") selected="selected"#end>$tlang.getString("lis.show5")</option>
										<option value="10"#if("$pagesize" == "10") selected="selected"#end>$tlang.getString("lis.show10")</option>
										<option value="20"#if("$pagesize" == "20") selected="selected"#end>$tlang.getString("lis.show20")</option>
										<option value="50"#if("$pagesize" == "50") selected="selected"#end>$tlang.getString("lis.show50")</option>
										<option value="100"#if("$pagesize" == "100") selected="selected"#end>$tlang.getString("lis.show100")</option>
										<option value="200"#if("$pagesize" == "200") selected="selected"#end>$tlang.getString("lis.show200")</option>
									</select>
									#if ("$pagesize" != "0")
										#if ($goNPButton == "true")
											<input type="button" name="List_next" value="&gt;" title="Next $pagesize" onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doList_next")'; submitform('attachForm');" />
										#else
											<input type="button" name="List_next" value="&gt;" disabled="disabled" />
										#end
										#if ($goNPButton == "true")
											<input type="button" name="List_last" value="&gt;|" title="Last" onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doList_last")'; submitform('attachForm');" />
										#else
											<input type="button" name="List_last" value="&gt;|" disabled="disabled" />
										#end
									#end
								</div>
							</td>
						</tr>
					#end
					################################################################ End Paging widgets
					#foreach($item in $other_sites)
						############################### Show top level folder #################
						<tr>
							<td headers="title">
								#if ($item.isCollection())
									<h3>
										#if ($item.isEmpty())
											<img src = "#imageLink("sakai/dir_closed.gif")" border="0"  alt="$tlang.getString('gen.folder1')"  />
											$validator.escapeHtml(${item.name})
										#elseif ($item.canRead())
											#if (!$expandedCollections.containsKey($item.Id))
												<a href="#toolLinkParam("ResourcesAction" "doExpand_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.open')">
													<img src = "#imageLink("sakai/dir_closedplus.gif")" border="0" title="$tlang.getString('sh.open')" alt="$tlang.getString('sh.open')" />
												</a>
											#else
												<a href="#toolLinkParam("ResourcesAction" "doCollapse_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.close')">
													<img src = "#imageLink("sakai/dir_openminus.gif")" border="0" title="$tlang.getString('sh.close')" alt="$tlang.getString('sh.close')" />
												</a>
											#end
											<a href="#toolLinkParam("ResourcesAction" "doNavigate" "collectionId=${validator.escapeUrl(${item.id})}&navRoot=$validator.escapeUrl($item.root)")" title="$tlang.getString('sh.go')">
												$validator.escapeHtml(${item.name})
											</a>
										#else
											<img src = "#imageLink("sakai/dir_closed.gif")" border="0" alt="$tlang.getString('gen.folder1')" />
											$validator.escapeHtml(${item.name})
										#end
									</h3>	
								#end	
							</td>
							<td headers="actions">
								######################  Add Action Links at Top Level  ##############
								#if($item && ($item.canAddItem() || $item.canAddFolder()))
									<div class="itemAction">
										#set ($itemsOnLine = 0)
										####### deal with adding item/folder
										#if($item.canAddItem())
											#if($disable_attach_links)
											#else
												#if ($itemsOnLine > 0)
													|
												#end
												#set ($itemsOnLine = $itemsOnLine + 1)
												<a href="#toolLinkParam("ResourcesAction" "doCreate" "itemType=${TYPE_UPLOAD}&collectionId=$validator.escapeUrl(${item.id})")" title ="$tlang.getString('att.addnewtitle')">$tlang.getString("att.addnew").trim()</a>
											#end
										#end
									</div>
								#end
								######################  End of Add Items/Folders at Top Level  ##############
							</td>
						</tr>	
						#set($collectionMembers = $item.Members)
						######################  No items message  ##############
						#if ($item.isLocal() && $collectionMembers.isEmpty())
							<tr>
								<td  colspan="4">
									<p class="instruction">
										$tlang.getString("sh.no")
										#if($dropboxMode)$tlang.getString("sh.drop")#else$tlang.getString("sh.reso")#end
										$tlang.getString("sh.item")
									</p>
								</td>
							</tr>		
						#else
							######################  Display individual items/folders  ##############
							#set ($unit ="em")
							#foreach ($member in $collectionMembers)
								#set ($width = "$!{item.depth}$unit")
								#set ($widthSp = (${item.depth} + 1) )
								#set ($widthSpDo = "$widthSp$unit")
								#if ($item.depth==1)	
									#set ($margin="margin-left:0")
								#else
									#set ($margin="margin-left:2em")
									#set ($marginAction="margin-left:4.7em")
								#end
								#if ($item.depth > 3)
									#set($headerDepth = 6)
								#else
									#set($headerDepth =$item.depth + 3)
								#end

								<tr>
									######################  Item title and action links  ##############
									<td headers="title" style="text-indent:$width">
										<h$headerDepth>
											#if ($item.isCollection())
												#if ($item.isEmpty())
													<img src = "#imageLink("sakai/dir_closed.gif")" border="0" alt="$tlang.getString('gen.folder1')" />
													$validator.escapeHtml(${item.name})
												#elseif ($item.canRead())
													#if (!$expandedCollections.containsKey($item.Id))
														<a href="#toolLinkParam("ResourcesAction" "doExpand_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.open')">
															<img src = "#imageLink("sakai/dir_closedplus.gif")" border="0" title="$tlang.getString('sh.open')" alt="$tlang.getString('sh.open')" />
														</a>
													#else
														<a href="#toolLinkParam("ResourcesAction" "doCollapse_collection" "collectionId=$validator.escapeUrl($item.Id)")" title="$tlang.getString('sh.close')">
															<img src = "#imageLink("sakai/dir_openminus.gif")" border="0" title="$tlang.getString('sh.close')" alt="$tlang.getString('sh.close')" />
														</a>
													#end
													<a href="#toolLinkParam("ResourcesAction" "doNavigate" "collectionId=${validator.escapeUrl(${item.id})}&navRoot=$validator.escapeUrl($item.root)")" title="$tlang.getString('sh.go')">
														$validator.escapeHtml(${item.name})
													</a>
												#else
													<img src = "#imageLink("sakai/dir_closed.gif")" border="0" alt="$tlang.getString('gen.folder1')" />
													$validator.escapeHtml(${item.name})
												#end
											#else
												#if ($item.canRead())
													#if ($item.hasCopyrightAlert())
														## if there is a copyright alert, show the alert page first
														<a href="" 
														title="$tlang.getString('gen.copycomf') $tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
														onclick="openCopyrightWindow('${item.url}','copyrightAlertWindow','scrollbars=yes,menubar=yes,height=600,width=800,resizable=yes,toolbar=yes,location=yes,status=yes');return false">
														#else
														<a href="${item.url}" target="${item.target}">
													#end
													<img src = "#imageLink($contentTypeImageService.getContentTypeImage($item.type))" border= "0" alt ="" hspace="0" />
													</a>
													#if ($item.hasCopyrightAlert())
														## if there is a copyright alert, show the alert page first
														<a href="" 
														title="$tlang.getString('gen.copycomf') $tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]"
														onclick="openCopyrightWindow('${item.url}','copyrightAlertWindow','scrollbars=yes,menubar=yes,height=600,width=800,resizable=yes,toolbar=yes,location=yes,status=yes');return false;">
															$validator.escapeHtml($item.name)
														</a>
														&#169;
													#else
														<a href="$item.url" target="$item.target"
														title="$tlang.getString('gen.type'): $contentTypeImageService.getContentTypeDisplayName($item.type)  [$tlang.getString('gen.newwin')]">
															$validator.escapeHtml($item.name)
														</a>
													#end
												#else
													 <img src = "#imageLink($contentTypeImageService.getContentTypeImage($item.type))" border="0" alt ="" hspace="0" />
													$validator.escapeHtml($item.name)
													#if ($item.hasCopyrightAlert())
														&#169;
													#end
												#end
											#end
										</h$headerDepth>
									</td>
									<td headers="actions">
										<div class="itemAction">
											#if($item.isCollection())
												#set ($itemsOnLine = 0)
												####### deal with adding item/folder
												#if($item.canAddItem())
													#if($disable_attach_links)
													#else
														#if ($itemsOnLine > 0)
															|
														#end
														#set ($itemsOnLine = $itemsOnLine + 1)
														<a href="#toolLinkParam("ResourcesAction" "doCreate" "itemType=${TYPE_UPLOAD}&collectionId=$validator.escapeUrl(${item.id})")" title="$tlang.getString('att.addnewtitle')">$tlang.getString("att.addnew").trim()</a>
													#end
												#end
											#else
												#set ($itemsOnLine = 0)
												####### deal with attaching item
												#if ($item.canRead() && $item.canSelect())
													#if($disable_attach_links)
													#else
														#if ($itemsOnLine > 0)
															|
														#end
														#set ($itemsOnLine = $itemsOnLine + 1)
														<a href="#toolLinkParam("ResourcesAction" "doAttachitem" "itemId=$validator.escapeUrl(${item.id})")" title ="$tlang.getString('att.select')">$tlang.getString("att.select").trim()</a>
													#end
												#end
												####### deal with duplicating item
												#if($item.canRead() && $item.canAddItem())
													#if($disable_attach_links)
													#else
														#if ($itemsOnLine > 0)
															|
														#end
														#set ($itemsOnLine = $itemsOnLine + 1)
														<a href="#toolLinkParam("ResourcesAction" "doPasteitem" "itemId=${validator.escapeUrl(${item.id})}&collectionId=${validator.escapeUrl(${item.container})}")" title="$tlang.getString('list.dup')">$tlang.getString("list.dup").trim()</a>
													#end
												#end
											#end
										</div>
										#if($copyFlag && "${item.id}" == "$copiedItem")
											<div class="inlineAlert">
												$tlang.getString("list.copied")
											</div>
										#end
									</td>
								</tr>
							#end
						#end
					#end ## foreach $item in $other_sites
	
				#else
					<tr>
						<th colspan="3">
						<h4>
							<a href="#toolLink("ResourcesAction" "doShowOtherSites")" title= "$tlang.getString('list.show')">
								<img src="#imageLink("sakai/expand.gif")" alt="$tlang.getString('list.show')" border="0" align="top" /> $validator.escapeHtml("$tlang.getString('list.show')")
							</a>
						</h4>
						</th>
					</tr>
				#end
			#end
			############################################# end of "Other sites" section 

			</table>
		
		<p class="act" >
			<input type="button" name="attachButton" id="attachButton" accesskey="s"
				onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doAddattachments")'; submitform('attachForm');" 
				value="$tlang.getString("att.finish")" #if($list_has_changed) class="active" #else disabled="disabled" #end />
			<input type="button" name="cancelButton" id="cancelButton" accesskey="x"
				onclick="javascript: document.getElementById('attachForm').action='#toolLink("ResourcesAction" "doCancel")'; submitform('attachForm');" 
				value="$tlang.getString("att.cancel")"  />
		</p>
	</form>						
</div>
